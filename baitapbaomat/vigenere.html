<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Vigenere Cipher</title>
  <style>
    body {
      font-family: monospace;
      background: #f0f4f8; /* nền xám nhạt */
      color: #222;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    .container {
      background: #fff;
      border: 2px solid #444;
      border-radius: 10px;
      box-shadow: 4px 4px 12px rgba(0,0,0,0.2);
      padding: 20px 30px;
      max-width: 600px;
      width: 100%;
    }
    .title {
      font-weight: bold;
      font-size: 18px;
      text-align: center;
      margin-bottom: 15px;
    }
    input {
      font-family: monospace;
      padding: 8px;
      margin: 6px 0;
      width: 100%;
      border: 1px solid #aaa;
      border-radius: 5px;
      font-size: 14px;
    }
    button {
      font-family: monospace;
      font-size: 14px;
      padding: 8px 14px;
      margin-top: 10px;
      background: #222;
      color: #fff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      transition: 0.3s;
    }
    button:hover {
      background: #444;
    }
    .output {
      margin-top: 15px;
      padding: 10px;
      background: #fafafa;
      border: 1px dashed #666;
      border-radius: 5px;
    }
    .label {
      margin-top: 10px;
      display: block;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="title">=== Vigenere Cipher ===</div>

    <label class="label">Nhap plaintext (chu hoa, khong dau):</label>
    <input type="text" id="plaintext" placeholder="HELLOWORLD">

    <label class="label">> Nhap khoa (chu hoa, khong dau):</label>
    <input type="text" id="key" placeholder="LINH">

    <button onclick="run()">Thuc hien</button>

    <div class="output">
      --- Ket qua ---<br>
      Ma hoa: <span id="mahoa"></span><br>
      Giai ma: <span id="giaima"></span>
    </div>
  </div>

<script>
function generateKey(text, key) {
  key = key.toUpperCase();
  while (key.length < text.length) {
    key += key;
  }
  return key.substr(0, text.length);
}

function encryptVigenere(text, key) {
  text = text.toUpperCase();
  let cipher = "";
  for (let i = 0; i < text.length; i++) {
    let c = (text.charCodeAt(i) - 65 + (key.charCodeAt(i) - 65)) % 26 + 65;
    cipher += String.fromCharCode(c);
  }
  return cipher;
}

function decryptVigenere(cipher, key) {
  let orig = "";
  for (let i = 0; i < cipher.length; i++) {
    let c = (cipher.charCodeAt(i) - 65 - (key.charCodeAt(i) - 65) + 26) % 26 + 65;
    orig += String.fromCharCode(c);
  }
  return orig;
}

function run() {
  let pt = document.getElementById("plaintext").value.toUpperCase().replace(/[^A-Z]/g, "");
  let key = document.getElementById("key").value.toUpperCase().replace(/[^A-Z]/g, "");

  if (pt.length === 0 || key.length === 0) {
    document.getElementById("mahoa").innerText = "(Lỗi: plaintext và key phải có ký tự hợp lệ)";
    document.getElementById("giaima").innerText = "";
    return;
  }

  let fullKey = generateKey(pt, key);
  let ct = encryptVigenere(pt, fullKey);
  let rt = decryptVigenere(ct, fullKey);

  document.getElementById("mahoa").innerText = ct;
  document.getElementById("giaima").innerText = rt;
}
</script>
</body>
</html>
